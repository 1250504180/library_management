const i18n = {
    zh: {
        // 系统基础
        title: "后台管理",
        systemName: "图书管理系统",
        welcome: "欢迎您",
        logout: "退出当前账号",

        // 菜单项
        home: "首页",
        bookCenter: "图书中心",
        bookSearch: "图书搜索",
        recommendationSearch: "推荐搜索",
        userCenter: "用户中心",
        userInfo: "个人信息",
        myBorrows: "借阅记录",
        commentList: "评论记录",

        bookMgmt: "图书管理",
        bookList: "图书列表",
        addBook: "图书上架",
        bookComment: "图书评论",
        recommendationMgmt: "推荐管理",

        borrowMgmt: "借阅管理",
        borrowBook: "借阅图书",
        returnBook: "归还图书",

        userMgmt: "用户管理",
        userList: "用户列表",
        addUser: "用户添加",
        selfInfo: "个人中心",

        stats: "数据统计",
        systemLog: "系统日志",
        dashboard: "Dashboard",

        // 功能按钮
        back: "返回",
        batchDelete: "批量删除",
        batchSetStatus: "批量设置状态",
        visible: "可见",
        invisible: "不可见",
        apply: "应用",
        import: "导入",
        batchImport: "批量导入",
        export: "导出",
        search: "搜索",
        save: "保存",
        returnBtn: "返回",

        // 字段通用
        id: "ID",
        bookId: "图书ID",
        bookNumber: "图书编号",
        bookName: "书名",
        author: "作者",
        isbn: "ISBN编号",
        language: "语言",
        translator: "译者",
        publisher: "出版社",
        publishDate: "出版日期",
        price: "定价",
        stock: "库存",
        available: "可借数",
        borrowCount: "借出次数",
        status: "状态",
        rating: "评分",
        description: "描述",
        actions: "操作",
        createTime: "创建时间",
        operator: "操作人",

        // 添加图书
        addBookTitle: "添加图书",
        nameCn: "中文书名",
        nameId: "外文书名",
        category: "分类",
        location: "馆藏位置",
        totalQuantity: "馆藏总数",
        availableQuantity: "可借数",
        coverImage: "封面图片地址",
        coverUpload: "上传封面",
        ratingAvg: "评分",
        select: "请选择",

        // 图书评论
        bookCommentTitle: "图书评论",
        commentManagement: "评论管理",
        commentSearch: "模糊搜索图书ID/用户ID/评论人/内容",
        byPerson: "评论人",
        content: "内容",
        addComment: "添加评论",
        
        // 图书详情
        bookDetail: "图书详情",
        viewDetail: "查看详情",
        bookDescription: "图书简介",
        bookComments: "读者评论",
        noComments: "暂无评论",
        noCover: "暂无封面",
        total: "总数",
        borrowed: "已借",
        back: "返回",

        // 推荐管理
        recommendationTitle: "推荐管理",
        recommendMonth: "推荐月份",
        recommendReason: "推荐理由",
        recommendImage: "推荐图片",
        addRecommend: "新增推荐",
        updateStatus: "更新状态",
        delete: "删除",
        bookKeyword: "关键词（书名/作者/ISBN/出版社）",
        chooseFile: "选择文件",
        addRecommendation: "新增推荐",
        bookId: "图书ID",
        enterBookId: "请输入图书ID",
        recommendMonth: "推荐月份",
        recommendReason: "推荐理由",
        enterRecommendReason: "请输入推荐理由",
        status: "状态",
        pleaseSelectStatus: "请选择状态",
        visible: "可见",
        invisible: "不可见",
        back: "返回",
        submit: "提交",
        requiredFields: "请填写所有必填项",
        saveSuccess: "新增成功",
        saveFailed: "新增失败",
        requestFailed: "请求失败",
        addRecommendation: "新增推荐",
        bookId: "图书ID",
        recommendMonth: "推荐月份",
        recommendReason: "推荐理由",
        status: "状态",
        pleaseSelectStatus: "请选择状态",
        visible: "可见",
        invisible: "不可见",
        back: "返回",
        submit: "提交",
        enterBookId: "请输入图书ID",
        enterRecommendReason: "请输入推荐理由",
        requiredFields: "请填写所有必填项",
        saveSuccess: "新增成功",
        saveFailed: "新增失败",
        requestFailed: "请求失败",
        languageChinese: "中文",
        languageEnglish: "英文",
        languageIndonesian: "印尼语",
        languageSpanish: "西班牙语",
        languageOther: "其他",

        category1: "经济/商业",
        category2: "农业",
        category3: "棕榈油",
        category4: "技术，科学，化学",
        category5: "启发",
        category6: "语言",
        category7: "常识",
        category8: "自我发展",
        category9: "工业",
        category10: "历史",
        category11: "传记、自传、回忆录",
        category12: "文学",
        category13: "生存",
        category14: "政治",
        category15: "心理学",
        category16: "管理理论"
    },

    en: {
        title: "Admin Panel",
        systemName: "Library Management System",
        welcome: "Welcome",
        logout: "Logout",

        home: "Home",
        bookCenter: "Book Center",
        bookSearch: "Book Search",
        recommendationSearch: "Recommendation",
        userCenter: "User Center",
        userInfo: "Profile",
        myBorrows: "Borrow Records",
        commentList: "Comments",

        bookMgmt: "Book Management",
        bookList: "Book List",
        addBook: "Add Book",
        bookComment: "Book Comments",
        recommendationMgmt: "Recommendations",

        borrowMgmt: "Borrow Management",
        borrowBook: "Borrow Book",
        returnBook: "Return Book",

        userMgmt: "User Management",
        userList: "User List",
        addUser: "Add User",
        selfInfo: "My Info",

        stats: "Statistics",
        systemLog: "System Log",
        dashboard: "Dashboard",

        back: "Back",
        batchDelete: "Batch Delete",
        batchSetStatus: "Set Status",
        visible: "Visible",
        invisible: "Invisible",
        apply: "Apply",
        import: "Import",
        batchImport: "Batch Import",
        export: "Export",
        search: "Search",
        save: "Save",
        returnBtn: "Return",

        id: "ID",
        bookId: "Book ID",
        bookNumber: "Book No.",
        bookName: "Title",
        author: "Author",
        isbn: "ISBN",
        language: "Language",
        translator: "Translator",
        publisher: "Publisher",
        publishDate: "Publish Date",
        price: "Price",
        stock: "Stock",
        available: "Available",
        borrowCount: "Borrowed",
        status: "Status",
        rating: "Rating",
        description: "Description",
        actions: "Actions",
        createTime: "Created Time",
        operator: "Operator",

        addBookTitle: "Add Book",
        nameCn: "Chinese Title",
        nameId: "Foreign Title",
        category: "Category",
        location: "Location",
        totalQuantity: "Total Stock",
        availableQuantity: "Available",
        coverImage: "Cover Image URL",
        coverUpload: "Upload Cover",
        ratingAvg: "Rating",
        select: "Please Select",

        bookCommentTitle: "Book Comments",
        commentManagement: "Comment Management",
        commentSearch: "Fuzzy search Book ID / User ID / Reviewer / Content",
        byPerson: "Reviewer",
        content: "Content",
        addComment: "Add Comment",
        
        // Book Detail
        bookDetail: "Book Detail",
        viewDetail: "View Detail",
        bookDescription: "Book Description",
        bookComments: "Reader Comments",
        noComments: "No comments yet",
        noCover: "No cover",
        total: "Total",
        borrowed: "Borrowed",
        back: "Back",

        recommendationTitle: "Recommendation Management",
        recommendMonth: "Month",
        recommendReason: "Reason",
        addRecommend: "Add Recommendation",
        updateStatus: "Update Status",
        delete: "Delete",
        bookKeyword: "Keyword (Title/Author/ISBN/Publisher)",
        chooseFile: "Choose File",
        addRecommendation: "Add Recommendation",
        bookId: "Book ID",
        enterBookId: "Enter Book ID",
        recommendMonth: "Month",
        recommendReason: "Reason",
        enterRecommendReason: "Enter reason",
        status: "Status",
        pleaseSelectStatus: "Please select status",
        visible: "Visible",
        invisible: "Invisible",
        back: "Back",
        submit: "Submit",
        requiredFields: "Please fill in all required fields",
        saveSuccess: "Added successfully",
        saveFailed: "Add failed",
        requestFailed: "Request failed",
        addRecommendation: "Add Recommendation",
        bookId: "Book ID",
        recommendMonth: "Recommendation Month",
        recommendReason: "Recommendation Reason",
        recommendImage: "Recommendation Image",
        status: "Status",
        pleaseSelectStatus: "Please select status",
        visible: "Visible",
        invisible: "Invisible",
        back: "Back",
        submit: "Submit",
        enterBookId: "Please enter book ID",
        enterRecommendReason: "Please enter recommendation reason",
        requiredFields: "Please fill in all required fields",
        saveSuccess: "Added successfully",
        saveFailed: "Add failed",
        requestFailed: "Request failed",
        languageChinese: "Chinese",
        languageEnglish: "English",
        languageIndonesian: "Indonesian",
        languageSpanish: "Spanish",
        languageOther: "Other",

        category1: "Economy/Business",
        category2: "Agriculture",
        category3: "Palm Oil",
        category4: "Technology/Science/Chemistry",
        category5: "Inspiration",
        category6: "Language",
        category7: "General Knowledge",
        category8: "Self Development",
        category9: "Industry",
        category10: "History",
        category11: "Biography/Autobiography/Memoir",
        category12: "Literature",
        category13: "Survival",
        category14: "Politics",
        category15: "Psychology",
        category16: "Management Theory"
    },

    id: {
        title: "Panel Admin",
        systemName: "Sistem Manajemen Perpustakaan",
        welcome: "Selamat Datang",
        logout: "Keluar",

        home: "Beranda",
        bookCenter: "Pusat Buku",
        bookSearch: "Pencarian Buku",
        recommendationSearch: "Rekomendasi",
        userCenter: "Pusat Pengguna",
        userInfo: "Info Pribadi",
        myBorrows: "Riwayat Pinjaman",
        commentList: "Komentar",

        bookMgmt: "Manajemen Buku",
        bookList: "Daftar Buku",
        addBook: "Tambah Buku",
        bookComment: "Komentar Buku",
        recommendationMgmt: "Rekomendasi",

        borrowMgmt: "Manajemen Peminjaman",
        borrowBook: "Pinjam Buku",
        returnBook: "Kembalikan Buku",

        userMgmt: "Manajemen Pengguna",
        userList: "Daftar Pengguna",
        addUser: "Tambah Pengguna",
        selfInfo: "Info Saya",

        stats: "Statistik",
        systemLog: "Log Sistem",
        dashboard: "Dashboard",

        back: "Kembali",
        batchDelete: "Hapus Massal",
        batchSetStatus: "Set Status",
        visible: "Terlihat",
        invisible: "Tidak Terlihat",
        apply: "Terapkan",
        import: "Impor",
        batchImport: "Impor Massal",
        export: "Ekspor",
        search: "Cari",
        save: "Simpan",
        returnBtn: "Kembali",

        id: "ID",
        bookId: "ID Buku",
        bookNumber: "Nomor Buku",
        bookName: "Judul",
        author: "Penulis",
        isbn: "ISBN",
        language: "Bahasa",
        translator: "Penerjemah",
        publisher: "Penerbit",
        publishDate: "Tanggal Terbit",
        price: "Harga",
        stock: "Stok",
        available: "Tersedia",
        borrowCount: "Jumlah Pinjam",
        status: "Status",
        rating: "Penilaian",
        description: "Deskripsi",
        actions: "Aksi",
        createTime: "Waktu Dibuat",
        operator: "Operator",

        addBookTitle: "Tambah Buku",
        nameCn: "Judul Cina",
        nameId: "Judul Asing",
        category: "Kategori",
        location: "Lokasi",
        totalQuantity: "Jumlah Stok",
        availableQuantity: "Tersedia",
        coverImage: "URL Gambar Sampul",
        coverUpload: "Unggah Sampul",
        ratingAvg: "Penilaian",
        select: "Silakan Pilih",

        bookCommentTitle: "Komentar Buku",
        commentManagement: "Manajemen Komentar",
        commentSearch: "Cari ID Buku / ID Pengguna / Pengulas / Isi",
        byPerson: "Pengulas",
        content: "Isi",
        addComment: "Tambah Komentar",
        
        // Detail Buku
        bookDetail: "Detail Buku",
        viewDetail: "Lihat Detail",
        bookDescription: "Deskripsi Buku",
        bookComments: "Komentar Pembaca",
        noComments: "Belum ada komentar",
        noCover: "Tidak ada sampul",
        total: "Total",
        borrowed: "Dipinjam",
        back: "Kembali",

        recommendationTitle: "Manajemen Rekomendasi",
        recommendMonth: "Bulan",
        recommendReason: "Alasan",
        addRecommend: "Tambah Rekomendasi",
        updateStatus: "Perbarui Status",
        delete: "Hapus",
        bookKeyword: "Kata kunci (Judul/Penulis/ISBN/Penerbit)",
        chooseFile: "Pilih Berkas",
        addRecommendation: "Tambah Rekomendasi",
        bookId: "ID Buku",
        enterBookId: "Masukkan ID Buku",
        recommendMonth: "Bulan Rekomendasi",
        recommendReason: "Alasan Rekomendasi",
        recommendImage: "Gambar Rekomendasi",
        enterRecommendReason: "Masukkan alasan rekomendasi",
        status: "Status",
        pleaseSelectStatus: "Silakan pilih status",
        visible: "Terlihat",
        invisible: "Tidak terlihat",
        back: "Kembali",
        submit: "Kirim",
        requiredFields: "Harap isi semua bidang yang diperlukan",
        saveSuccess: "Berhasil ditambahkan",
        saveFailed: "Gagal menambahkan",
        requestFailed: "Permintaan gagal",
        addRecommendation: "Tambah Rekomendasi",
        bookId: "ID Buku",
        recommendMonth: "Bulan Rekomendasi",
        recommendReason: "Alasan Rekomendasi",
        status: "Status",
        pleaseSelectStatus: "Silakan pilih status",
        visible: "Terlihat",
        invisible: "Tidak terlihat",
        back: "Kembali",
        submit: "Kirim",
        enterBookId: "Silakan masukkan ID buku",
        enterRecommendReason: "Silakan masukkan alasan rekomendasi",
        requiredFields: "Silakan isi semua kolom wajib",
        saveSuccess: "Berhasil ditambahkan",
        saveFailed: "Gagal menambahkan",
        requestFailed: "Permintaan gagal",
        languageChinese: "Cina",
        languageEnglish: "Inggris",
        languageIndonesian: "Indonesia",
        languageSpanish: "Spanyol",
        languageOther: "Lainnya",

        category1: "Ekonomi/Bisnis",
        category2: "Pertanian",
        category3: "Minyak Sawit",
        category4: "Teknologi/Ilmu/Kimia",
        category5: "Inspirasi",
        category6: "Bahasa",
        category7: "Pengetahuan Umum",
        category8: "Pengembangan Diri",
        category9: "Industri",
        category10: "Sejarah",
        category11: "Biografi/Otobiografi/Memoar",
        category12: "Sastra",
        category13: "Bertahan Hidup",
        category14: "Politik",
        category15: "Psikologi",
        category16: "Teori Manajemen"
    }
};

function loadLang(lang) {
    // 设置页面标题
    const titleKey = $("title").data("i18n");
    if (titleKey && i18n[lang] && i18n[lang][titleKey]) {
        $("title").text(i18n[lang][titleKey]);
    }

    // 替换非 <option> 的所有 data-i18n 文本
    $("[data-i18n]").each(function () {
        const key = $(this).data("i18n");
        const tag = $(this).prop("tagName").toLowerCase();
        const type = $(this).attr("type");

        if (tag === "input" && (type === "button" || type === "submit" || type === "reset")) {
            if (i18n[lang] && i18n[lang][key]) {
                $(this).val(i18n[lang][key]);
            }
        } else if (tag !== "option") {
            if (i18n[lang] && i18n[lang][key]) {
                $(this).text(i18n[lang][key]);
            }
        }
    });

    // 替换 input 的 placeholder
    $("[data-i18n-placeholder]").each(function () {
        const key = $(this).data("i18n-placeholder");
        if (i18n[lang] && i18n[lang][key]) {
            $(this).attr("placeholder", i18n[lang][key]);
        }
    });

    // 替换 <img> alt
    $("img[data-i18n-alt]").each(function () {
        const key = $(this).data("i18n-alt");
        if (i18n[lang] && i18n[lang][key]) {
            $(this).attr("alt", i18n[lang][key]);
        }
    });

    // ✅ 重新构建 language 下拉框选项
    const $language = $("#language");
    if ($language.length) {
        const selected = $language.val(); // 记录当前选中
        $language.empty().append(`
            <option value="" data-i18n="select">${i18n[lang].select}</option>
            <option value="中文" data-i18n="languageChinese">${i18n[lang].languageChinese}</option>
            <option value="印尼语" data-i18n="languageIndonesian">${i18n[lang].languageIndonesian}</option>
            <option value="英文" data-i18n="languageEnglish">${i18n[lang].languageEnglish}</option>
            <option value="西班牙语" data-i18n="languageSpanish">${i18n[lang].languageSpanish}</option>
            <option value="Other" data-i18n="languageOther">${i18n[lang].languageOther}</option>
        `);
        $language.val(selected); // 恢复选中项
    }

    // ✅ 重新构建 category 下拉框选项
    const $category = $("#categoryId");
    if ($category.length) {
        const selected = $category.val();
        $category.empty().append(`
            <option value="" data-i18n="select">${i18n[lang].select}</option>
            <option value="1" data-i18n="category1">${i18n[lang].category1}</option>
            <option value="2" data-i18n="category2">${i18n[lang].category2}</option>
            <option value="3" data-i18n="category3">${i18n[lang].category3}</option>
            <option value="4" data-i18n="category4">${i18n[lang].category4}</option>
            <option value="5" data-i18n="category5">${i18n[lang].category5}</option>
            <option value="6" data-i18n="category6">${i18n[lang].category6}</option>
            <option value="7" data-i18n="category7">${i18n[lang].category7}</option>
            <option value="8" data-i18n="category8">${i18n[lang].category8}</option>
            <option value="9" data-i18n="category9">${i18n[lang].category9}</option>
            <option value="10" data-i18n="category10">${i18n[lang].category10}</option>
            <option value="11" data-i18n="category11">${i18n[lang].category11}</option>
            <option value="12" data-i18n="category12">${i18n[lang].category12}</option>
            <option value="13" data-i18n="category13">${i18n[lang].category13}</option>
            <option value="14" data-i18n="category14">${i18n[lang].category14}</option>
            <option value="15" data-i18n="category15">${i18n[lang].category15}</option>
            <option value="16" data-i18n="category16">${i18n[lang].category16}</option>
        `);
        $category.val(selected);
    }

    // ✅ 重新构建 status 下拉框
    const $status = $("#status");
    if ($status.length) {
        const selected = $status.val();
        $status.empty().append(`
            <option value="1" data-i18n="visible">${i18n[lang].visible}</option>
            <option value="0" data-i18n="invisible">${i18n[lang].invisible}</option>
        `);
        $status.val(selected);
    }
}

